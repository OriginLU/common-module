<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <changeSet author="LZL" id="201908211508">
        <createTable tableName="pay_bills">
            <column autoIncrement="true" name="id" remarks="主键" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="order_no" remarks="订单号" type="VARCHAR(512)"/>
            <column name="user_id" remarks="客户id" type="BIGINT"></column>
            <column name="user_name" remarks="客户名称" type="VARCHAR(512)"/>
            <column name="frame_number" remarks="车架号" type="VARCHAR(512)"/>
            <column name="car_number" remarks="车牌号" type="VARCHAR(512)"></column>
            <column name="customer_type" remarks="客户类型（1.个人客户）" type="integer"/>
            <column name="capital_id" remarks="资金方id" type="BIGINT"/>
            <column name="capital_products_id" remarks="资金产品id" type="BIGINT"></column>
            <column name="cooperator_id" remarks="合作商id" type="BIGINT"/>
            <column name="contract_number" remarks="合同编号" type="VARCHAR(512)"/>
            <column name="pay_date" remarks="还款日" type="datetime"></column>
            <column name="pay_date_num" remarks="还款日数字" type="integer"></column>
            <column name="total_periods" remarks="总期数" type="integer"></column>
            <column name="periods" remarks="期数" type="integer"></column>
            <column name="funding_rate" remarks="资金方罚息利率  0.05% = 0.0005" type="decimal(10,2)"></column>
            <column name="cooperator_rate" remarks="合作商罚息利率" type="decimal(10,2)"></column>
            <column name="amount_due" remarks="应还金额(分)" type="decimal(10,2)"></column>
            <column name="monthly_supply" remarks="应还月供（分）" type="decimal(10,2)"></column>
            <column name="monthly_principal" remarks="应还月供本金（分）" type="decimal(10,2)"></column>
            <column name="monthly_interest" remarks="应还月供利息（分）" type="decimal(10,2)"></column>
            <column name="funding_interest" remarks="资金方应还罚息" type="decimal(10,2)"></column>
            <column name="cooperator_interest" remarks="合作商应还罚息" type="decimal(10,2)"></column>
            <column name="cooperator_service_fee" remarks="应还合作商服务费（分）" type="decimal(10,2)"></column>
            <column name="pay_type" remarks="还款方式（1.通联2.华夏虚拟账户）" type="integer"></column>
            <column name="actual_amount_due" remarks="实际金额(分)" type="decimal(10,2)"></column>
            <column name="actual_monthly_supply" remarks="实际月供（分）" type="decimal(10,2)"></column>
            <column name="actual_monthly_principal" remarks="实际月供本金（分）" type="decimal(10,2)"></column>
            <column name="actual_monthly_interest" remarks="实际月供利息（分）" type="decimal(10,2)"></column>
            <column name="actual_funding_interest" remarks="实际资金方罚息" type="decimal(10,2)"></column>
            <column name="actual_cooperator_interest" remarks="实际合作商罚息" type="decimal(10,2)"></column>
            <column name="actual_cooperator_service_fee" remarks="实际合作商服务费（分）" type="decimal(10,2)"></column>
            <column name="unpaid_principal" remarks="未偿本金（分）" type="decimal(10,2)"></column>
            <column name="pay_collect" remarks="是否收齐(0.否1.是)" type="integer"></column>
            <column name="pay_status" remarks="还款状态（0.未划扣1.划扣中2.正常还款3.未还款4.部分还款5.逾期未还款6.逾期已还款）" type="integer"></column>
            <column name="overdue_count" remarks="逾期天数" type="integer"></column>
            <column name="update_time" remarks="修改时间" type="datetime"></column>
            <column name="creat_time" remarks="创建时间" type="datetime"></column>
        </createTable>
    </changeSet>

    <changeSet id="201908301410" author="lzl">
        <renameColumn tableName="pay_bills" oldColumnName="creat_time" newColumnName="create_time" columnDataType="datetime"></renameColumn>
    </changeSet>

    <changeSet id="2019090215131111" author="lzl">
        <modifyDataType tableName="pay_bills" columnName="funding_rate" newDataType="decimal(10,5)"></modifyDataType>
        <modifyDataType tableName="pay_bills" columnName="cooperator_rate" newDataType="decimal(10,5)"></modifyDataType>
    </changeSet>

    <changeSet id="2019090916421111" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="funding_due" remarks="资金方应还金额(分) " type="decimal(10,5)"></column>
            <column name="cooperator_due" remarks="合作商应还金额(分) " type="decimal(10,5)"></column>
            <column name="actual_funding_due" remarks="实际资金方金额(分)" type="decimal(10,5)"></column>
            <column name="actual_cooperator_due" remarks="合作商实收金额(分)" type="decimal(10,5)"></column>
            <column name="funding_pay_status" remarks="月供还款状态（0.未划扣1.划扣中2.正常还款3.未还款4.部分还款5.逾期未还款6.逾期已还款）" type="integer"></column>
            <column name="cooperator_pay_status" remarks="服务费还款状态（0.未划扣1.划扣中2.正常还款3.未还款4.部分还款5.逾期未还款6.逾期已还款）" type="integer"></column>
            <column name="funding_receive_time" remarks="到账时间 " type="datetime"></column>
            <column name="pay_time" remarks="划扣时间 " type="datetime"></column>
            <column name="funding_overdue_count" remarks="月供逾期天数" type="integer"></column>
            <column name="cooperator_overdue_count" remarks="服务费逾期天数 " type="integer"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2019091611400000" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="id_card" remarks="证件号码" type="VARCHAR(512)"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2019092011361111" author="lzl">
        <modifyDataType tableName="pay_bills" columnName="funding_due" newDataType="decimal(15,5)"></modifyDataType>
        <modifyDataType tableName="pay_bills" columnName="cooperator_due" newDataType="decimal(15,5)"></modifyDataType>
        <modifyDataType tableName="pay_bills" columnName="actual_funding_due" newDataType="decimal(15,5)"></modifyDataType>
        <modifyDataType tableName="pay_bills" columnName="actual_cooperator_due" newDataType="decimal(15,5)"></modifyDataType>
        <modifyDataType tableName="pay_bills" columnName="funding_rate" newDataType="decimal(15,5)"></modifyDataType>
        <modifyDataType tableName="pay_bills" columnName="cooperator_rate" newDataType="decimal(15,5)"></modifyDataType>
    </changeSet>

    <changeSet id="2019092314595555" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="compensatoryWhether" remarks="是否代偿0否 1是" type="integer"></column>
            <column name="compensatory_day" remarks="代偿触发天数" type="integer"></column>
            <column name="compensatory_status" remarks="是否代偿完成 0.否 1.是" type="integer"></column>
            <column name="compensatory_need" remarks="本次是否要代偿 查询使用 0.否 1.是" type="integer"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2019092611036666" author="lzl">
        <renameColumn tableName="pay_bills" oldColumnName="compensatoryWhether" newColumnName="compensatory_whether" columnDataType="integer"></renameColumn>
    </changeSet>

    <changeSet id="2019092910145555" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="from_where" remarks="账单来源 0.正常供应链 1.旧数据导入" type="integer"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2019100917385555" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="cashier_merchant" remarks="收款商户" type="integer"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2019110411051111" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="funding_interest_reduction" remarks="月供罚息减免" type="decimal(15,5)"></column>
            <column name="cooperator_interest_reduction" remarks="服务费罚息减免" type="decimal(15,5)"></column>
            <column name="all_interest_reduction" remarks="所有罚息减免" type="decimal(15,5)"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2019111309581111" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="channel_code" remarks="通道编码" type="BIGINT"></column>
        </addColumn>
    </changeSet>

    <changeSet id="20191113133444444" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="settle_account_no" remarks="结算账号" type="VARCHAR(512)"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2019111910181111" author="lzl">
        <modifyDataType tableName="pay_bills" columnName="channel_code" newDataType="VARCHAR(512)"></modifyDataType>
    </changeSet>

    <changeSet id="2019112711261111" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="bank_num" remarks="还款银行卡号" type="VARCHAR(512)"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2019122314531111" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="others_due" remarks="其他款项" type="decimal(15,5)"></column>
        </addColumn>
    </changeSet>

    <changeSet id="20200214111111" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="business_code" remarks="业务类型" type="integer"></column>
        </addColumn>
    </changeSet>

    <changeSet id="2020030311201111" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="falsify_due" remarks="违约金" type="decimal(15,5)"></column>
            <column name="retained_funds" remarks="留购款" type="decimal(15,5)"></column>
            <column name="actualRetainedFunds" remarks="实际留购款（分）" type="decimal(15,5)"></column>
        </addColumn>
    </changeSet>
    <changeSet id="202030410303333333" author="lzl">
        <renameColumn tableName="pay_bills" oldColumnName="actualRetainedFunds" newColumnName="actual_retained_funds" columnDataType="decimal(15,5)"></renameColumn>
    </changeSet>
    <changeSet id="202003161111" author="lzl">
        <addColumn tableName="pay_bills">
            <column name="advance_status" remarks="是否是提前结清账单 1是" type="integer"></column>
        </addColumn>
    </changeSet>
</databaseChangeLog>
