<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <changeSet author="HP (generated)" id="1566180338354-1">
        <createTable tableName="pay_bill">
            <column autoIncrement="true" name="id" remarks="主键" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="req_sn" remarks="交易流水号" type="VARCHAR(50)"/>
            <column defaultValueNumeric="0" name="sn" remarks="分账序号" type="INT"/>
            <column name="trx_type" remarks="交易类型" type="INT"/>
            <column name="trx_status" remarks="交易状态" type="INT"/>
            <column name="trx_amount" remarks="交易金额" type="DECIMAL(10, 2)"/>
            <column name="pay_account" remarks="付款方账户" type="VARCHAR(255)"/>
            <column name="pay_account_no" remarks="付款方账户卡号" type="VARCHAR(255)"/>
            <column name="pay_account_type" remarks="付款方账户类型" type="INT"/>
            <column name="recept_account_no" remarks="收款方卡号" type="VARCHAR(50)"/>
            <column name="recept_account" remarks="收款方账户名" type="VARCHAR(255)"/>
            <column name="recept_account_type" remarks="收款账户类型" type="INT"/>
            <column name="pay_bank_code" remarks="付款银行代码" type="INT"/>
            <column name="recept_bank_code" remarks="收款银行代码" type="INT"/>
            <column name="trx_time" remarks="交易时间" type="datetime(6)"/>
            <column name="cost" remarks="手续费" type="DECIMAL(10, 2)"/>
            <column name="trx_code" type="VARCHAR(255)"/>
            <column name="channal" remarks="渠道" type="INT"/>
            <column name="create_time" remarks="创建时间" type="datetime(6)"/>
            <column name="capital" type="VARCHAR(255)"/>
            <column name="remark" remarks="备注" type="VARCHAR(255)"/>
            <column name="order_exception_info" remarks="订单异常信息" type="VARCHAR(255)"/>
            <column name="modify_time" remarks="更新时间" type="datetime(6)"/>
            <column name="protocol_no" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1566180338354-11" author="lzl">
        <addColumn tableName="pay_bill">
            <column name="cooperator_id" remarks="合作商id" type="BIGINT"/>
            <column name="contract_number" remarks="合同编号" type="VARCHAR(512)"/>
            <column name="customer_type" remarks="客户类型（1.个人客户）" type="integer"/>
            <column name="user_id" remarks="客户id" type="BIGINT"/>
            <column name="user_name" remarks="客户名称" type="VARCHAR(512)"/>
            <column name="frame_number" remarks="车架号" type="VARCHAR(512)"/>
            <column name="car_number" remarks="车牌号" type="VARCHAR(512)"/>
            <column name="pay_date" remarks="还款日" type="datetime"/>
            <column name="total_periods" remarks="总期数" type="integer"/>
            <column name="periods" remarks="期数" type="integer"/>
            <column name="amount_due" remarks="应还金额(分)" type="decimal(10,2)"/>
            <column name="monthly_supply" remarks="应还月供（分）" type="decimal(10,2)"/>
            <column name="monthly_principal" remarks="应还月供本金（分）" type="decimal(10,2)"/>
            <column name="monthly_interest" remarks="应还月供利息（分）" type="decimal(10,2)"/>
            <column name="penalty_interest" remarks="应还罚息" type="decimal(10,2)"/>
            <column name="cooperator_service_fee" remarks="应还合作商服务费（分）" type="decimal(10,2)"/>
            <column name="pay_type" remarks="还款方式（1.通联2.华夏虚拟账户）" type="integer"/>
            <column name="actual_amount_due" remarks="实际金额(分)" type="decimal(10,2)"/>
            <column name="actual_monthly_supply" remarks="实际月供（分）" type="decimal(10,2)"/>
            <column name="actual_monthly_principal" remarks="实际月供本金（分）" type="decimal(10,2)"/>
            <column name="actual_monthly_interest" remarks="实际月供利息（分）" type="decimal(10,2)"/>
            <column name="actual_penalty_interest" remarks="实际罚息" type="decimal(10,2)"/>
            <column name="actual_cooperator_service_fee" remarks="实际合作商服务费（分）" type="decimal(10,2)"/>
            <column name="overdue_count" remarks="逾期天数" type="integer"/>
        </addColumn>
    </changeSet>
    <changeSet id="2019090516091111-11" author="lzl">
        <addColumn tableName="pay_bill">
            <column name="bill_id" remarks="账单id " type="BIGINT"/>
        </addColumn>
    </changeSet>
    <changeSet id="2019090516091111-12" author="lzl">
        <addColumn tableName="pay_bill">
            <column name="merchant_type" remarks="划扣商户类型 0-合作方 1-资金方 " type="integer"/>
        </addColumn>
    </changeSet>
    <changeSet id="2019090516091111-13" author="lzl">
        <addColumn tableName="pay_bill">
            <column name="pay_protocol_id" remarks="支付通道协议id " type="VARCHAR(512)"/>
        </addColumn>
    </changeSet>
    <changeSet id="201909091725-13" author="lzl">
        <addColumn tableName="pay_bill">
            <column name="origin_trade_total_amount" remarks="原交易总额 " type="decimal(10,2)"/>
        </addColumn>
    </changeSet>
    <changeSet id="201909091725-14" author="lzl">
        <addColumn tableName="pay_bill">
            <column name="penalty_amount" remarks="罚息 " type="decimal(10,5)"/>
        </addColumn>
    </changeSet>

    <changeSet id="201909091725-15" author="lzl">
        <modifyDataType tableName="pay_bill" columnName="pay_bank_code" newDataType="VARCHAR(512)"/>
        <modifyDataType tableName="pay_bill" columnName="recept_bank_code" newDataType="VARCHAR(512)"/>
    </changeSet>

    <changeSet id="201909091725-16" author="lzl">
        <modifyDataType tableName="pay_bill" columnName="sn" newDataType="VARCHAR(512)"/>
    </changeSet>

    <changeSet id="201909111726-18" author="lzl">
        <modifyDataType tableName="pay_bill" columnName="capital" newDataType="VARCHAR(512)"/>
    </changeSet>

    <changeSet id="20190916114111" author="lzl">
        <addColumn tableName="pay_bill">
            <column name="id_card" remarks="证件号码" type="VARCHAR(512)"></column>
        </addColumn>
    </changeSet>
</databaseChangeLog>